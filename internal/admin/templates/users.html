<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>用户管理</title>
    <link rel="stylesheet" href="/static/css/tailwind.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body class="p-8">
<h2 class="text-2xl font-bold mb-4">用户列表</h2>
<table class="table-auto border w-full">
    <thead>
        <tr>
            <th class="border px-4 py-2">用户名</th>
            <th class="border px-4 py-2">当前角色</th>
            <th class="border px-4 py-2">修改角色</th>
        </tr>
    </thead>
    <tbody>
        {{range .}}
        <tr>
            <td class="border px-4 py-2">{{.Username}}</td>
            <td class="border px-4 py-2">{{.Role}}</td>
            <td class="border px-4 py-2">
                <form hx-post="/admin/update-role" hx-target="this" hx-swap="outerHTML">
                    <input type="hidden" name="username" value="{{.Username}}">
                    <select name="role" class="border rounded p-1">
                        <option value="editor" {{if eq .Role "editor"}}selected{{end}}>editor</option>
                        <option value="viewer" {{if eq .Role "viewer"}}selected{{end}}>viewer</option>
                        <option value="admin" {{if eq .Role "admin"}}selected{{end}}>admin</option>
                    </select>
                    <button class="ml-2 px-2 py-1 bg-blue-600 text-white rounded">更新</button>
                </form>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
</body>
</html>

